<!DOCTYPE html>
<html>
    <head>

    </head>
    <body>
        <script>
            function computerPlay(){
                let ran = Math.random();
                return (ran < 1/3) ? "Rock" : 
                       (ran < 2/3) ? "Paper" : "Scissors";
            }
            function playRound(playerSelection,computerSelection) {
                if (typeof(playerSelection) !== "string"){
                    console.error("playerSelection is undefined");
                }
                let playerSelectionCapitalized = playerSelection.toUpperCase()[0] + playerSelection.toLowerCase().slice(1);
                switch(computerSelection){
                    case "Rock":
                            switch(playerSelectionCapitalized){
                                case "Rock":
                                    return tie();
                                case "Paper":
                                    return win();
                                case "Scissors":
                                    return lose();
                                default:
                                    return error();
                            }
                    case "Paper":
                            switch(playerSelectionCapitalized){
                                case "Rock":
                                    return lose();
                                case "Paper":
                                    return tie();
                                case "Scissors":
                                    return win();
                                default:
                                    return error();
                            }
                    case "Scissors":
                            switch(playerSelectionCapitalized){
                                case "Rock":
                                    return win();
                                case "Paper":
                                    return lose();
                                case "Scissors":
                                    return tie();
                                default:
                                    return error();
                            }
                    default:
                        return error();
                }
                function win(){
                    //return `You win! ${playerSelectionCapitalized} beats ${computerSelection}`
                    return true
                }
                function lose(){
                    //return `You lose! ${computerSelection} beats ${playerSelectionCapitalized}`
                    return false
                }
                function tie(){
                    //return "tie"
                    return undefined
                }
                function error(){
                    //return "The selection is neither Rock, Paper or Scissors!"
                    return undefined
                }
            }


            function game(){
                let totalWins = 0;
                let totalLosses = 0;
                let totalTies = 0;
                for(i=1;i<=5;i++){
                    playerSelection = prompt("Rock, Paper or Scissors?");
                    play = playRound(playerSelection,computerPlay());
                    if (play) {
                        totalWins++
                    } else if (play === undefined) {
                        totalTies ++;
                    } else {
                        totalLosses ++;
                    }
                }
                if (totalWins > totalLosses)  {
                    return `Winner! You won ${totalWins} rounds!`
                } else {
                    return `You lose. You lost ${totalLosses} rounds. Better luck next time.`;
                }
            }
            console.log(game());
        </script>
    </body>
</html>